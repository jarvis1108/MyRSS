<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="UTF-8">
  <title>Collection | My RSS</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <link rel="alternate icon" type="image/png" href="assets/i/favicon.png">
  <link rel="stylesheet" href="assets/css/amazeui.min.css" />
  <style>
    @media only screen and (min-width: 1200px) {
      .blog-g-fixed {
        max-width: 1200px;
      }
    }

    @media only screen and (min-width: 641px) {
      .blog-sidebar {
        font-size: 1.4rem;
      }
    }

    .blog-main {
      padding: 20px 0;
    }

    .blog-title {
      margin: 10px 0 20px 0;
    }

    .blog-meta {
      font-size: 14px;
      margin: 10px 0 20px 0;
      color: #222;
    }

    .blog-meta a {
      color: #27ae60;
    }

    .blog-option{
      font-size: 14px;
      color: #6b6b6b;
    }

    .blog-option a{
      color: #6b6b6b;
    }

    .edit-label{
      float: left; 
      margin-left: 10px;
    }

    .edit-status{
      position: static;
      padding-right: 220px;
    }

    .blog-pagination a {
      font-size: 1.4rem;
    }

    .blog-content img {
      max-width: 100%;
      height: auto;
    }

    .blog-footer {
      padding: 10px 0;
      text-align: center;
    }

    .collection-list a{
      color:#434343;
    }

    .collection-list-add {
      float:right;
    }

    .content-icon {
      float: right;
      margin: 0 10px;
    }

  </style>
</head>

<body>

  <!-- header -->
  <header class="am-topbar">
    <h1 class="am-topbar-brand">
      <a href="#">My RSS</a>
    </h1>

    <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#doc-topbar-collapse'}"><span
        class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span></button>

    <div class="am-collapse am-topbar-collapse" id="doc-topbar-collapse">
      <ul id="nav" class="am-nav am-nav-pills am-topbar-nav">
        <li><a href="Home_Page.html">发现</a></li>
        <li><a href="Share.html">分享</a></li>
        <li class="am-active"><a href="Collection.html">收藏</a></li>
        <li><a href="Group.html">小组</a></li>
        <li><a href="Source.html">来源</a></li>
        <li><a href="Personal_information.html">个人信息</a></li>
      </ul>
    </div>
  </header>


  <div class="am-g am-g-fixed blog-g-fixed">
    <!-- catalogue -->
    <div class="am-u-md-4 blog-sidebar">
      <div class="am-panel-group">
        <section class="am-panel am-panel-default">
          <div class="am-panel-hd">关于收藏</div>
          <div class="am-panel-bd">
            <p>我们在首页上为你推荐了最新的RSS文章，你可以收藏到这里，以备以后查看。</p>
            <p>你也可以在这里导入自己喜欢的文章。</p>
            <button type="button" class="am-btn am-btn-success am-btn-sm" id="entry-save-toggle">导入文章</button>
          </div>

          <!-- save entry-->
          <div class="am-modal am-modal-prompt" tabindex="-1" id="save-confirm">
            <div class="am-modal-dialog">
              <div class="am-modal-hd">导入文章</div>
              <div class="am-modal-bd">
                <div>
                  <p>请输入文章标题</p>
                  <input type="text" class="am-modal-prompt-input" id="new-entry-title">
                </div>
                <p></p>
                <div>
                  <p>请将需要导入的文章链接粘贴到下方文本框内</p>
                  <input type="text" class="am-modal-prompt-input" id="new-entry-link">
                </div>
              </div>
              <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-confirm>导入</span>
              </div>
            </div>
          </div>
        </section>

        <section class="am-panel am-panel-default">
          <div class="am-panel-hd">收藏夹
            <a class="collection-list-add" id="collection-new-toggle">新建</a>
          </div>
          <ul class="am-nav collection-list" id="mylist">
            <!-- collection list -->
          </ul>

          <!-- new collection -->
          <div class="am-modal am-modal-confirm" tabindex="-1" id="new-confirm">
            <div class="am-modal-dialog">
              <div class="am-modal-hd">创建收藏夹</div>
              <div class="am-modal-bd">
                <label class="edit-label">名字</label>
                <input type="text" class="am-modal-prompt-input" id="new-title" value="">
              </div>
              <div class="am-modal-bd">
                <label class="edit-label">权限</label>
                <div class="edit-status">
                  <select id="new-selected" data-am-selected>
                    <option value=""></option>
                    <option value="0">自己可见</option>
                    <option value="1">小组公开</option>
                    <option value="2">完全公开</option>
                  </select>
                </div>
              </div>
              <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>取消</span>
                <span class="am-modal-btn" data-am-modal-confirm>确定</span>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <!-- content -->
    <div class="am-u-md-8">

      <section class="am-panel am-panel-primary">
        <header class="am-panel-hd">
          <h3 class="am-panel-title">
            <label value="" id="collection-name">默认收藏夹</label>
            <a class="am-icon-remove content-icon" id="collection-delete-toggle"></a>
            <a class="am-icon-edit content-icon" id="collection-edit-toggle"></a>
          </h3>
        </header>
        <div class="am-panel-bd">
          创建于 <a id="collection-creatTime">2018/09/10</a> · <a id="collection-status">小组公开</a>
        </div>

        <!-- collection delete confirm -->
        <div class="am-modal am-modal-confirm" tabindex="-1" id="collection-delete-confirm">
          <div class="am-modal-dialog">
            <div class="am-modal-hd">删除收藏夹</div>
            <div class="am-modal-bd">
              你确定要删除这个收藏夹吗？
            </div>
            <div class="am-modal-footer">
              <span class="am-modal-btn" data-am-modal-cancel>取消</span>
              <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
          </div>
        </div>

        <!-- edit confirm -->
        <div class="am-modal am-modal-confirm" tabindex="-1" id="edit-confirm">
          <div class="am-modal-dialog">
            <div class="am-modal-hd">编辑收藏夹</div>
            <div class="am-modal-bd">
              <label class="edit-label">名字</label>
              <input type="text" class="am-modal-prompt-input" id="edit-title" value="">
            </div>
            <div class="am-modal-bd">
              <label class="edit-label">权限</label>
              <div class="edit-status">
                <select id="edit-selected" placeholder="修改权限" data-am-selected>
                  <option selected value=""></option>
                  <option value="0">自己可见</option>
                  <option value="1">小组公开</option>
                  <option value="2">完全公开</option>
                </select>
              </div>
            </div>
            <div class="am-modal-footer">
              <span class="am-modal-btn" data-am-modal-cancel>取消</span>
              <span class="am-modal-btn" data-am-modal-confirm>确定</span>
            </div>
          </div>
        </div>
      </section>

      <section id="articles">

        <article class="blog-main">
          <h3 class="am-article-title blog-title">
            <a href="#">Google fonts 的字體（display 篇）</a>
          </h3>
          <h4 class="am-article-meta blog-meta">by <a href="">User</a> · 2018/06/17 · <a href="#">CSDN</a></h4>
          <div class="am-g blog-content am-u-lg-12">

            <p>你自信滿滿的跟客戶進行第一次 demo。秀出你精心設計的內容時，你原本期許客戶冷不防地掉下感動的眼淚。</p>
            <p>因為那實在是太高級了。</p>

          </div>
        </article>
        <h4 class="am-article-meta blog-option"><a class="entry-delete-option">删除</a></h4>
        <hr class="am-article-divider blog-hr">

      </section>

      <!-- entry delete -->
      <div class="am-modal am-modal-confirm" tabindex="-1" id="entry-delete-confirm">
        <div class="am-modal-dialog">
          <div class="am-modal-hd">删除文章</div>
          <div class="am-modal-bd">
            你确定要删除这篇文章吗？
          </div>
          <div class="am-modal-footer">
            <span class="am-modal-btn" data-am-modal-cancel>取消</span>
            <span class="am-modal-btn" data-am-modal-confirm>确定</span>
          </div>
        </div>
      </div>

      <ul class="am-pagination blog-pagination">
        <li class="am-pagination-prev"><a onclick="goLastPage()">&laquo; 上一页</a></li>
        <li class="am-pagination-next"><a onclick="goNextPage()">下一页 &raquo;</a></li>
      </ul>
    </div>

  </div>

  <footer class="blog-footer">
    <p>Collection | My RSS<br />
      <small>© Copyright 2018</small>
    </p>
  </footer>

  <!--[if lt IE 9]>
  <script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
  <script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
  <script src="assets/js/amazeui.ie8polyfill.min.js"></script>
  <![endif]-->

  <!--[if (gte IE 9)|!(IE)]><!-->
  <!-- <script src="assets/js/jquery.min.js"></script> -->
  <!--<![endif]-->
  <!-- <script src="assets/js/amazeui.min.js"></script> -->

  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>

  <script src="assets/js/amazeui.min.js"></script>

  <script>
    licolection = document.getElementById("nav").childNodes;
    for (i = 0; i < licolection.length / 2; ++i) {
      element = licolection[i * 2 + 1].childNodes[0];
      element.setAttribute('href', element.getAttribute('href') + "?" + document.URL.split("?")[1])
    }
  </script>

  <script>
    var pageNum = 1;
    //初始化页面
    List();
    ListCollection(1);
    $(EntryDeleteConfirm());

    //事件监听
    $(CollectionDeleteConfirm());
    $(CollectionEditConfirm());
    $(CollectionEditCheck());
    $(CollectionNewConfirm());
    $(EntrySaveConfirm());
    //注意该监听需要在页面生成完毕后开始
    // $(EntryDeleteConfirm());

    //DONE: collection-delete-confirm
    function CollectionDeleteConfirm() {
      $('#collection-delete-toggle').on('click', function () {
        $('#collection-delete-confirm').modal({
          relatedTarget: this,
          onConfirm: function () {
            CollectionDelete();
          }
        });
      });
    }

    //DONE: collection-edit-confirm
    var curStatus;//编辑后的收藏夹权限
    function CollectionEditCheck() {
      $('#edit-selected').on('change', function () {
        curStatus = $(this).val();
      });
    }
    function CollectionEditConfirm() {
      var title;
      var status;
      //initial
      $('#edit-confirm').on('open.modal.amui', function () {
        title = document.getElementById("collection-name").innerText;
        document.getElementById("edit-title").setAttribute("value", title);
        var collectionId = document.getElementById("collection-name").getAttribute("value");
        status = document.getElementById(collectionId).getAttribute("value");
      });

      $('#collection-edit-toggle').on('click', function () {
        $('#edit-confirm').modal({
          relatedTarget: this,
          onConfirm: function () {
            //校验是否发生更改
            var curTitle = document.getElementById("edit-title").value;
            if (curTitle != title || curStatus != status) {
              console.log("change");
              Update();
            }
          }
        });
      });
    }

    //DONE: collection-new-confirm
    var newStatus = 3;//编辑后的收藏夹权限
    function CollectionEditCheck() {
      $('#new-selected').on('change', function () {
        newStatus = $(this).val();
      });
    }
    function CollectionNewConfirm() {
      $('#collection-new-toggle').on('click', function () {
        $('#new-confirm').modal({
          relatedTarget: this,
          onConfirm: function () {
            var title = document.getElementById("new-title").value;
            var status = newStatus;
            if ("" != title && 3 != status) {
              CollectionSave();
            } else {
              alert("请输入收藏夹名称并选择公开权限");
            }
          }
        });
      });
    }

    //TODO: save-confirm
    function EntrySaveConfirm() {
      $('#entry-save-toggle').on('click', function () {
        $('#save-confirm').modal({
          relatedTarget: this,
          onConfirm: function () {
            var title = document.getElementById("new-entry-title").value;
            var link = document.getElementById("new-entry-link").value;
            if ("" != title && "" != link) {
              EntrySave();
            } else {
              alert("请输入文章标题和链接");
            }

          }
        });
      });
    }

    //entry-delete-confirm
    function EntryDeleteConfirm() {
      $('#articles').find('.entry-delete-option').add('#entry-delete-toggle').
        on('click', function () {
          // $('#entry-delete-toggle').on('click', function () {
          $('#entry-delete-confirm').modal({
            relatedTarget: this,
            onConfirm: function () {
              var entryId = this.relatedTarget.id
              RemoveEntry(entryId);
            }
          });
        });
    }

    function goLastPage() {
      if (pageNum == 1)
        return;
      else {
        pageNum--;
        ListCollection(pageNum);
      }
    }

    function goNextPage() {
      pageNum++;
      ListCollection(pageNum);
    }


    //DONE 获取所有公开的收藏夹
    function List() {
      var reqId = "1";
      var reqType = "List";
      var publicStatus = "-1";//-1 读取用户所有status的收藏夹
      var userID = document.URL.split("?")[1];
      var device = "pc";
      var pageSize = 5;
      var pageNum = 1;

      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "publicStatus": publicStatus,
          "userId": userID,
          "device": device
        },
        "reqPageInfo":
        {
          "pageSize": pageSize,
          "pageNum": pageNum
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/collection/list",
          // get与post的data格式不同
          data: {
            reqId: reqId,
            reqType: reqType,
            reqParam: JSON.stringify(
              {
                "publicStatus": publicStatus,
                "userId": userID,
                "device": device
              }),
            reqPageInfo: JSON.stringify(
              {
                "pageSize": pageSize,
                "pageNum": pageNum
              })
          },
          datatype: "json",
          type: "GET",
          async: false,
          contentType: "application/json",
          success: function (objResult) {
            //显示所有公开收藏夹信息
            var collectionList = document.getElementById("mylist");
            for (var i = 0; i < objResult.resResult.curData.totalElements; i++) {
              var collection = document.createElement("li");
              var link = document.createElement("a");
              var id = objResult.resResult.curData.content[i].collectionId;//收藏夹ID 
              var name = objResult.resResult.curData.content[i].name;//收藏夹名字
              var publicStatus = objResult.resResult.curData.content[i].publicStatus;//收藏夹状态           
              var createTime = objResult.resResult.curData.content[i].createTime;//创建时间
              link.id = id;
              link.text = name;
              link.setAttribute("value", publicStatus);
              link.setAttribute("onclick", "changeCollection(this)");
              if (i == 0) {
                collection.className = "am-active";//默认激活第一个收藏夹
                var cur = document.getElementById("collection-name")
                cur.innerText = name;
                cur.setAttribute("value", id);
                var status;
                switch (publicStatus) {
                  case 0: status = "自己可见"; break;
                  case 1: status = "小组公开"; break;
                  case 2: status = "完全公开"; break;
                }
                document.getElementById("collection-status").innerText = status;
                document.getElementById("collection-creatTime").innerText = createTime;
                curStatus = publicStatus;
              }
              collection.appendChild(link);
              collectionList.appendChild(collection);
            }

          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }

    

    function changeCollection(obj) {
      var collectionId = document.getElementById("collection-name").getAttribute("value");
      document.getElementById(collectionId).parentNode.className = "";

      obj.parentNode.className = "am-active";
      //获取当前激活的收藏夹的文章
      var name = obj.text;
      var id = obj.id;
      var publicStatus = obj.getAttribute("value");
      var cur = document.getElementById("collection-name")
      cur.innerText = name;
      cur.setAttribute("value", id);
      var status;
      switch (publicStatus) {
        case "0": status = "自己可见"; break;
        case "1": status = "小组公开"; break;
        case "2": status = "完全公开"; break;
      }
      document.getElementById("collection-status").innerText = status;
      ListCollection(1);
      $(EntryDeleteConfirm());
    }


    //DONE 获得收藏夹所有的文章
    function ListCollection(pageNum) {
      var reqId = "1";
      var reqType = "ListCollection";
      var userId = document.URL.split("?")[1];
      var collectionId = document.getElementById("collection-name").getAttribute("value");
      var device = "pc";
      var pageSize = 2;


      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "collectionId": collectionId,
          "device": device
        },
        "reqPageInfo":
        {
          "pageSize": pageSize,
          "pageNum": pageNum
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/entry/list/collection",
          data: {
            reqId: reqId,
            reqType: reqType,
            reqParam: JSON.stringify(
              {
                "collectionId": collectionId,
                "device": device
              }),
            reqPageInfo: JSON.stringify(
              {
                "pageSize": pageSize,
                "pageNum": pageNum
              })
          },
          datatype: "json",
          type: "GET",
          async: false,
          contentType: "application/json",
          success: function (objResult) {
            var articles = document.getElementById("articles");
            articles.innerHTML = "";//清空页面上的现有文章信息
            for (var i = 0; i < objResult.resResult.curData.totalElements; i++) {
              var article = document.createElement("article");
              article.className = "blog-main";

              //标题
              var h3 = document.createElement("h3");
              h3.className = "am-article-title blog-title";
              var a1 = document.createElement("a");
              a1.href = objResult.resResult.curData.content[i].entryLink;//文章链接
              a1.text = objResult.resResult.curData.content[i].title;//文章标题
              h3.appendChild(a1);
              article.appendChild(h3);

              //"by <a href="">User</a> · 2018/06/17 · <a href="#">CSDN</a>"
              var meta = document.createElement("h4");
              meta.className = "am-article-meta blog-meta";
              var by = document.createTextNode("by ");
              var author = document.createElement("a");
              author.text = objResult.resResult.curData.content[i].sourceName;//TODO:作者?
              var updateTime = objResult.resResult.curData.content[i].updateTime;//时间
              var time = document.createTextNode(updateTime);
              var source = document.createElement("a");
              source.text = objResult.resResult.curData.content[i].sourceName;//RSS来源
              var split1 = document.createTextNode(" · ");
              var split2 = document.createTextNode(" · ");
              meta.appendChild(by);
              meta.appendChild(author);
              meta.appendChild(split1);
              meta.appendChild(time);
              meta.appendChild(split2);
              meta.appendChild(source);
              article.appendChild(meta);

              //内容
              var content = document.createElement("div");
              content.className = "am-g blog-content am-u-lg-12";
              var p = document.createElement("p");
              p.text = objResult.resResult.curData.content[i].content;//文章内容
              content.appendChild(p);
              article.appendChild(content);

              var option = document.createElement("h4");
              option.className = "am-article-meta blog-option";
              var deleteOption = document.createElement("a");
              deleteOption.className = "entry-delete-option";
              deleteOption.text = "删除";
              deleteOption.id = objResult.resResult.curData.content[i].entryId;//文章ID
              option.appendChild(deleteOption);

              var hr = document.createElement("hr");
              hr.className = "am-article-divider blog-hr";

              articles.appendChild(article);
              articles.appendChild(option);
              articles.appendChild(hr);
            }


          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }

    //DONE: 更新收藏夹信息（name, description,publicStatus）
    function Update() {
      var reqId = "1";
      var reqType = "Update";
      var name = document.getElementById("edit-title").value;
      var description = "";
      var pStatus = curStatus;
      var collectionId = document.getElementById("collection-name").getAttribute("value");

      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "name": name,
          "description": description,
          "publicStatus": curStatus,
          "collectionId": collectionId
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/collection/update",
          data: JSON.stringify(objParam),
          datatype: "json",
          type: "POST",
          contentType: "application/json",
          success: function (objResult) {
            //更新收藏夹内容
            document.getElementById("collection-name").innerText = objResult.resResult.curData.name;
            //更新收藏夹列表
            document.getElementById(collectionId).innerText = objResult.resResult.curData.name;
            var publicStatus = objResult.resResult.curData.publicStatus;//收藏夹状态
            document.getElementById(collectionId).setAttribute("value", publicStatus);
            var status;
            switch (pStatus) {
              case 0: status = "自己可见"; break;
              case 1: status = "小组公开"; break;
              case 2: status = "完全公开"; break;
            }
            document.getElementById("collection-status").innerText = status;
            window.location.href = "Collection.html?" + document.URL.split("?")[1];

          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }

    //新建收藏夹
    function CollectionSave() {
      var reqId = "1";
      var reqType = "Save";
      var name = document.getElementById("new-title").value;
      var description = "";
      var publicStatus = newStatus;
      var userId = document.URL.split("?")[1];

      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "name": name,
          "description": description,
          "publicStatus": publicStatus
        },
        "reqUserInfo":
        {
          "userId": userId
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/collection",
          data: JSON.stringify(objParam),
          datatype: "json",
          type: "POST",
          contentType: "application/json",
          success: function (objResult) {
            window.location.href = "Collection.html?" + document.URL.split("?")[1];
          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }

    //删除收藏夹
    function CollectionDelete() {
      var reqId = "1";
      var reqType = "Delete";
      var collectionId = document.getElementById("collection-name").getAttribute("value");

      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "collectionId": collectionId
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/collection/delete",
          data: JSON.stringify(objParam),
          datatype: "json",
          type: "POST",
          contentType: "application/json",
          success: function (objResult) {
            window.location.href = "Collection.html?" + document.URL.split("?")[1];
          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }

    //新建文章
    function EntrySave() {
      var reqId = "1";
      var reqType = "Save";
      var link = document.getElementById("new-entry-link").value;
      var collectionId = document.getElementById("collection-name").getAttribute("value");
      var description = "";
      var title = document.getElementById("new-entry-title").value; 

      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "link": link,
          "collectionId": collectionId,
          "description": description,
          "title ": title
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/entry",
          data: JSON.stringify(objParam),
          datatype: "json",
          type: "POST",
          contentType: "application/json",
          success: function (objResult) {
            window.location.href = "Collection.html?" + document.URL.split("?")[1];
          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }

    //删除文章
    function RemoveEntry(entryId) {
      var reqId = "1";
      var reqType = "RemoveEntry";

      var objParam =
      {
        "reqId": reqId,
        "reqType": reqType,
        "reqParam":
        {
          "entryId": entryId
        }
      };

      $.ajax
        ({
          url: "http://120.79.191.240:8089/rssbackend/api/v1/collection/removeEntry",
          data: JSON.stringify(objParam),
          datatype: "json",
          type: "POST",
          contentType: "application/json",
          success: function (objResult) {
            window.location.href = "Collection.html?" + document.URL.split("?")[1];
          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(XMLHttpRequest.status);
          }
        });
    }
  </script>


</body>

</html>